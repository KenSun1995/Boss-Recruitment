{"ast":null,"code":"/**\n * There are lots of action creator:\n *      synchronized action\n *      asynchronized action\n */\nimport io from 'socket.io-client';\nimport { reqRegister, reqLogin, reqUpdateUser, reqUser, reqUserList } from '../api';\nimport { AUTH_SUCCESS, ERROR_MSG, RECEIVE_USER, RESET_USER, RECEIVE_USER_LIST } from './action-types';\n\nfunction initIO() {\n  // connect server, get socket obj\n  const socket = io('ws://localhost:4000', {\n    transports: ['websocket']\n  }); // bind 'receiveMessage' monitor, to receive msg from server\n\n  socket.on('receiveMsg', function (data) {\n    console.log('Browser received msg:', data);\n  });\n}\n/**\n * async send msg in chat\n */\n\n\nexport const sendMsg = _ref => {\n  let {\n    from,\n    to,\n    content\n  } = _ref;\n  return dispatch => {\n    console.log('send msg:', {\n      from,\n      to,\n      content\n    });\n  };\n};\n/**\n * auth success sync action\n */\n\nconst authSuccess = user => ({\n  type: AUTH_SUCCESS,\n  data: user\n});\n/**\n * msg info sync action\n */\n\n\nconst errorMsg = msg => ({\n  type: ERROR_MSG,\n  data: msg\n});\n/**\n * receive  user sync action\n */\n\n\nconst receiveUser = user => ({\n  type: RECEIVE_USER,\n  data: user\n});\n/**\n * reset user sync action\n */\n\n\nexport const resetUser = msg => ({\n  type: RESET_USER,\n  data: msg\n});\n/**\n * received user list sync action\n */\n\nexport const receivedUserList = userList => ({\n  type: RECEIVE_USER_LIST,\n  data: userList\n});\n/**\n * register\n */\n\nexport const register = user => {\n  const {\n    username,\n    password,\n    password2,\n    type\n  } = user; // do validation before send request\n\n  if (!username) {\n    return errorMsg('you have to enter username');\n  }\n\n  if (password !== password2) {\n    return errorMsg('two time passwords should be the same');\n  }\n\n  if (!password || !password2) {\n    return errorMsg('passwords must be entered');\n  } // form data is valid\n\n\n  return async dispatch => {\n    // send register asyn request\n    const response = await reqRegister({\n      username,\n      password,\n      type\n    });\n    const result = response.data;\n\n    if (result.code === 0) {\n      // success\n      // dispatch success action\n      dispatch(authSuccess(result.data));\n    } else {\n      // fail\n      // dispatch fail action\n      dispatch(errorMsg(result.msg));\n    }\n  };\n};\n/**\n * login\n */\n\nexport const login = user => {\n  const {\n    username,\n    password\n  } = user; // do validation before send request\n\n  if (!username) {\n    return errorMsg('you have to enter username');\n  }\n\n  if (!password) {\n    return errorMsg('password should be the entering');\n  }\n\n  return async dispatch => {\n    // send login asyn request\n    const response = await reqLogin(user);\n    const result = response.data;\n\n    if (result.code === 0) {\n      // success\n      // dispatch success action\n      dispatch(authSuccess(result.data));\n    } else {\n      // fail\n      // dispatch fail action\n      dispatch(errorMsg(result.msg));\n    }\n  };\n};\n/**\n * update\n */\n\nexport const update = user => {\n  return async dispatch => {\n    const response = await reqUpdateUser(user);\n    const result = response.data;\n\n    if (result.code === 0) {\n      // success\n      dispatch(receiveUser(result.data));\n    } else {\n      // fail\n      dispatch(resetUser(result.msg));\n    }\n  };\n};\n/**\n * get userInfo according to cookie\n */\n\nexport const getUser = () => {\n  return async dispatch => {\n    const response = await reqUser();\n    const result = response.data;\n\n    if (result.code === 0) {\n      dispatch(receiveUser(result.data));\n    } else {\n      dispatch(resetUser(result.msg));\n    }\n  };\n};\n/**\n * get userList async action\n */\n\nexport const getUserList = type => {\n  return async dispatch => {\n    const response = await reqUserList(type);\n    const result = response.data;\n\n    if (result.code === 0) {\n      dispatch(receivedUserList(result.data));\n    }\n  };\n};","map":{"version":3,"sources":["/Users/stewardsun/Desktop/技术栈/React项目/Boss Recruitment/bob-recruitment-client/src/redux/actions.js"],"names":["io","reqRegister","reqLogin","reqUpdateUser","reqUser","reqUserList","AUTH_SUCCESS","ERROR_MSG","RECEIVE_USER","RESET_USER","RECEIVE_USER_LIST","initIO","socket","transports","on","data","console","log","sendMsg","from","to","content","dispatch","authSuccess","user","type","errorMsg","msg","receiveUser","resetUser","receivedUserList","userList","register","username","password","password2","response","result","code","login","update","getUser","getUserList"],"mappings":"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","sourcesContent":["/**\n * There are lots of action creator:\n *      synchronized action\n *      asynchronized action\n */\nimport io from 'socket.io-client'\nimport { reqRegister, reqLogin, reqUpdateUser, reqUser, reqUserList } from '../api'\nimport { AUTH_SUCCESS, ERROR_MSG, RECEIVE_USER, RESET_USER, RECEIVE_USER_LIST } from './action-types'\n\nfunction initIO() {\n    // connect server, get socket obj\n    const socket = io('ws://localhost:4000', { transports: ['websocket'] })\n    // bind 'receiveMessage' monitor, to receive msg from server\n    socket.on('receiveMsg', function (data) {\n        console.log('Browser received msg:', data)\n    })\n}\n/**\n * async send msg in chat\n */\nexport const sendMsg = ({ from, to, content }) => {\n    return dispatch => {\n        console.log('send msg:', { from, to, content });\n\n\n    }\n}\n/**\n * auth success sync action\n */\nconst authSuccess = (user) => ({ type: AUTH_SUCCESS, data: user });\n/**\n * msg info sync action\n */\nconst errorMsg = (msg) => ({ type: ERROR_MSG, data: msg });\n/**\n * receive  user sync action\n */\nconst receiveUser = (user) => ({ type: RECEIVE_USER, data: user });\n/**\n * reset user sync action\n */\nexport const resetUser = (msg) => ({ type: RESET_USER, data: msg });\n/**\n * received user list sync action\n */\nexport const receivedUserList = (userList) => ({ type: RECEIVE_USER_LIST, data: userList });\n\n/**\n * register\n */\nexport const register = (user) => {\n    const { username, password, password2, type } = user;\n    // do validation before send request\n    if (!username) {\n        return errorMsg('you have to enter username');\n    }\n    if (password !== password2) {\n        return errorMsg('two time passwords should be the same');\n    }\n    if (!password || !password2) {\n        return errorMsg('passwords must be entered');\n    }\n    // form data is valid\n    return async dispatch => {\n        // send register asyn request\n        const response = await reqRegister({ username, password, type });\n        const result = response.data;\n        if (result.code === 0) { // success\n            // dispatch success action\n            dispatch(authSuccess(result.data));\n        } else { // fail\n            // dispatch fail action\n            dispatch(errorMsg(result.msg));\n        }\n    }\n}\n\n/**\n * login\n */\nexport const login = (user) => {\n    const { username, password } = user;\n    // do validation before send request\n    if (!username) {\n        return errorMsg('you have to enter username');\n    }\n    if (!password) {\n        return errorMsg('password should be the entering');\n    }\n    return async dispatch => {\n        // send login asyn request\n        const response = await reqLogin(user);\n        const result = response.data;\n        if (result.code === 0) { // success\n            // dispatch success action\n            dispatch(authSuccess(result.data));\n        } else { // fail\n            // dispatch fail action\n            dispatch(errorMsg(result.msg));\n        }\n    }\n}\n\n/**\n * update\n */\nexport const update = (user) => {\n    return async dispatch => {\n        const response = await reqUpdateUser(user);\n        const result = response.data;\n        if (result.code === 0) { // success\n            dispatch(receiveUser(result.data));\n        } else { // fail\n            dispatch(resetUser(result.msg));\n        }\n    }\n}\n\n/**\n * get userInfo according to cookie\n */\nexport const getUser = () => {\n    return async dispatch => {\n        const response = await reqUser();\n        const result = response.data;\n        if (result.code === 0) {\n            dispatch(receiveUser(result.data));\n        } else {\n            dispatch(resetUser(result.msg));\n        }\n    }\n}\n\n/**\n * get userList async action\n */\nexport const getUserList = (type) => {\n    return async dispatch => {\n        const response = await reqUserList(type);\n        const result = response.data;\n        if (result.code === 0) {\n            dispatch(receivedUserList(result.data));\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}